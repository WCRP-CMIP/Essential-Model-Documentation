
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for CMIP Climate Models and Components">
      
      
        <meta name="author" content="WCRP-CMIP">
      
      
        <link rel="canonical" href="https://WCRP-CMIP.github.io/Essential-Model-Documentation/technical/mkdocs/">
      
      
        <link rel="prev" href="generators/">
      
      
        <link rel="next" href="styling/">
      
      
      <link rel="icon" href="../../stylesheets/logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.47">
    
    
  <title>Index | Essential Model Documentation</title>

    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mkdocs-build-system" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://WCRP-CMIP.github.io/Essential-Model-Documentation/" title="Essential Model Documentation" class="md-header__button md-logo" aria-label="Essential Model Documentation" data-md-component="logo">
      
  <img src="../../stylesheets/logo-light.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__search">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
    </label>
    <div class="md-search" data-md-component="search" role="dialog">
      <label class="md-search__overlay" for="__search"></label>
      <div class="md-search__inner" role="search">
        <form class="md-search__form" name="search">
          <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
          <label class="md-search__icon md-icon" for="__search">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
          </label>
          <nav class="md-search__options" aria-label="Search">
            <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
            </button>
          </nav>
        </form>
        <div class="md-search__output">
          <div class="md-search__scrollwrap" data-md-scrollfix>
            <div class="md-search-result" data-md-component="search-result">
              <div class="md-search-result__meta">
                Initializing search
              </div>
              <ol class="md-search-result__list"></ol>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="md-header__source">
      <a href="https://github.com/WCRP-CMIP/Essential-Model-Documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    WCRP-CMIP/Essential-Model-Documentation
  </div>
</a>
    </div>
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Essential Model Documentation" class="md-nav__button md-logo" aria-label="Essential Model Documentation" data-md-component="logo">
      
  <img src="../../stylesheets/logo-light.svg" alt="logo">

    </a>
    Essential Model Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/WCRP-CMIP/Essential-Model-Documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    WCRP-CMIP/Essential-Model-Documentation
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Bidk:
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Bidk:
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bidk/Warnings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Warnings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bidk/gelato/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gelato
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bidk/info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Info
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bidk/infobackup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Infobackup
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model:
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Model:
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model/cnrm-esm2-1e.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cnrm Esm2 1E
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model Component:
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Model Component:
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_component/arpege-climat-version-6-3.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arpege Climat Version 6 3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_component/bisicles-ukesm-ismip6-1.0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bisicles Ukesm Ismip6 1.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_component/clm4.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clm4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_component/gelato.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gelato
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_component/hadam3.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hadam3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_component/nemo-v3-6.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nemo V3 6
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_component/piscesv2-gas.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Piscesv2 Gas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_component/reprobus-c-v2-0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reprobus C V2 0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_component/surfex-v8-modeling-platform.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Surfex V8 Modeling Platform
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_component/tactic.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tactic
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model Family:
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Model Family:
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_family/arpege-climat.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arpege Climat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_family/bcc-csm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bcc Csm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_family/bisicles.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bisicles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_family/cam.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cam
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_family/canesm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Canesm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_family/cesm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cesm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_family/clm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clm
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Technical:
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Technical:
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  <span class="md-ellipsis">
    Mkdocs:
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Mkdocs:
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="generators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generators
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="styling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Styling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://wcrp-cmip.org/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CMIP Website
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.wcrp-climate.org/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WCRP
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--secondary" aria-label="toc.title">
  <label class="md-nav__title" for="__toc">
    toc.title
  </label>
  <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
    
      <li class="md-nav__item">
  <a href="#mkdocs-build-system" class="md-nav__link">
    <span class="md-ellipsis">
      MkDocs Build System
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MkDocs Build System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Directory Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Build Pipeline
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build Pipeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stage-1-pre-build-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Stage 1: Pre-build Hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-2-generator-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Stage 2: Generator Scripts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-3-navigation-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Stage 3: Navigation Generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-4-mkdocs-build" class="md-nav__link">
    <span class="md-ellipsis">
      Stage 4: MkDocs Build
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mkdocsyml" class="md-nav__link">
    <span class="md-ellipsis">
      mkdocs.yml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-new-generated-pages" class="md-nav__link">
    <span class="md-ellipsis">
      Adding New Generated Pages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#styling-system" class="md-nav__link">
    <span class="md-ellipsis">
      Styling System
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Styling System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shared-pagecss" class="md-nav__link">
    <span class="md-ellipsis">
      shared-page.css
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-specific-css" class="md-nav__link">
    <span class="md-ellipsis">
      Page-specific CSS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templates" class="md-nav__link">
    <span class="md-ellipsis">
      Templates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-icons" class="md-nav__link">
    <span class="md-ellipsis">
      Available Icons
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-locally" class="md-nav__link">
    <span class="md-ellipsis">
      Running Locally
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pages-not-appearing-in-navigation" class="md-nav__link">
    <span class="md-ellipsis">
      Pages not appearing in navigation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#styles-not-loading" class="md-nav__link">
    <span class="md-ellipsis">
      Styles not loading
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generator-script-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Generator script errors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="mkdocs-build-system">MkDocs Build System<a class="headerlink" href="#mkdocs-build-system" title="Permanent link">&para;</a></h1>
<p>This documentation site uses MkDocs with Material theme and a custom build pipeline for generating dynamic pages from the EMD Registry.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The build system has three main stages:</p>
<ol>
<li><strong>Pre-build Generation</strong> - Python scripts fetch JSON-LD data and generate HTML pages</li>
<li><strong>Navigation Generation</strong> - Automatic navigation built from directory structure</li>
<li><strong>MkDocs Build</strong> - Standard MkDocs compilation and static site generation</li>
</ol>
<h2 id="directory-structure">Directory Structure<a class="headerlink" href="#directory-structure" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>Essential-Model-Documentation/
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>├── docs/                          # Documentation source
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>│   ├── model/                     # Generated model pages
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>│   ├── model_component/           # Generated component pages
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>│   ├── model_family/              # Generated family pages
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>│   ├── scripts/                   # Generation scripts
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>│   │   ├── helpers/               # Shared utilities
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>│   │   │   ├── __init__.py        # Icons, keywords, utilities
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>│   │   │   ├── utils.py           # Parsing functions
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>│   │   │   └── templates/         # Jinja2 templates
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>│   │   ├── generate_models.py
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>│   │   ├── generate_model_components.py
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>│   │   └── generate_model_families.py
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>│   ├── stylesheets/               # CSS styles
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>│   │   ├── shared-page.css        # Common styles (emd-* classes)
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>│   │   ├── model-page.css         # Model-specific styles
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>│   │   └── component-page.css     # Component-specific styles
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>│   └── SUMMARY.md                 # Auto-generated navigation
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>│
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>└── src/mkdocs/
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>    ├── mkdocs.yml                 # MkDocs configuration
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    ├── hooks/
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    │   ├── pre_build.py           # Runs generators before build
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>    │   └── generate_nav.py        # Creates SUMMARY.md
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>    └── overrides/                 # Theme customizations
</code></pre></div>
<h2 id="build-pipeline">Build Pipeline<a class="headerlink" href="#build-pipeline" title="Permanent link">&para;</a></h2>
<h3 id="stage-1-pre-build-hook">Stage 1: Pre-build Hook<a class="headerlink" href="#stage-1-pre-build-hook" title="Permanent link">&para;</a></h3>
<p>The <code>pre_build.py</code> hook runs before MkDocs starts building. It executes all <code>generate_*.py</code> scripts in <code>docs/scripts/</code> as subprocesses:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">on_pre_build</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="c1"># Find all generate_*.py scripts</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="n">scripts</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">scripts_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;generate_*.py&quot;</span><span class="p">))</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="c1"># Execute each and wait for completion</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    <span class="k">for</span> <span class="n">script_path</span> <span class="ow">in</span> <span class="n">scripts</span><span class="p">:</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>            <span class="p">[</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">script_path</span><span class="p">)],</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>            <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>            <span class="n">timeout</span><span class="o">=</span><span class="mi">120</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>        <span class="p">)</span>
</code></pre></div>
<p>This ensures generated HTML files exist before MkDocs copies them to the output directory.</p>
<h3 id="stage-2-generator-scripts">Stage 2: Generator Scripts<a class="headerlink" href="#stage-2-generator-scripts" title="Permanent link">&para;</a></h3>
<p>Each generator script:</p>
<ol>
<li>Fetches JSON-LD data from the EMD Registry via <code>cmipld</code></li>
<li>Parses and transforms the data</li>
<li>Renders HTML using Jinja2 templates</li>
<li>Writes files to the appropriate <code>docs/</code> subdirectory</li>
</ol>
<p>Example flow for model components:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Fetch from registry</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">data</span> <span class="o">=</span> <span class="n">cmipld</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://emd.mipcvs.dev/model_component/nemo-version-3-6.json&quot;</span><span class="p">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1"># Prepare template context</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">context</span> <span class="o">=</span> <span class="n">prepare_template_context</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="c1"># Render and write</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="n">html</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">context</span><span class="p">)</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="n">output_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</code></pre></div>
<h3 id="stage-3-navigation-generation">Stage 3: Navigation Generation<a class="headerlink" href="#stage-3-navigation-generation" title="Permanent link">&para;</a></h3>
<p>The <code>generate_nav.py</code> hook creates <code>SUMMARY.md</code> by scanning the docs directory:</p>
<ul>
<li>Discovers all <code>.md</code> and <code>.html</code> files</li>
<li>Builds hierarchical navigation from folder structure</li>
<li>Adds custom links from <code>links.yml</code></li>
<li>Generates proper titles from filenames</li>
</ul>
<h3 id="stage-4-mkdocs-build">Stage 4: MkDocs Build<a class="headerlink" href="#stage-4-mkdocs-build" title="Permanent link">&para;</a></h3>
<p>Standard MkDocs compilation with Material theme features:</p>
<ul>
<li>Search indexing</li>
<li>Dark/light mode toggle</li>
<li>Code syntax highlighting</li>
<li>Responsive navigation</li>
</ul>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h2>
<h3 id="mkdocsyml">mkdocs.yml<a class="headerlink" href="#mkdocsyml" title="Permanent link">&para;</a></h3>
<p>Key settings:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">plugins</span><span class="p">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">search</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">literate-nav</span><span class="p">:</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">      </span><span class="nt">nav_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SUMMARY.md</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="nt">hooks</span><span class="p">:</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hooks/pre_build.py</span><span class="w">      </span><span class="c1"># Runs first - generates pages</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hooks/generate_nav.py</span><span class="w">   </span><span class="c1"># Runs second - builds navigation</span>
</code></pre></div>
<h3 id="adding-new-generated-pages">Adding New Generated Pages<a class="headerlink" href="#adding-new-generated-pages" title="Permanent link">&para;</a></h3>
<ol>
<li>Create a generator script in <code>docs/scripts/generate_*.py</code></li>
<li>Create a Jinja2 template in <code>docs/scripts/helpers/templates/</code></li>
<li>Create output directory in <code>docs/</code></li>
<li>The pre_build hook will automatically pick it up</li>
</ol>
<h2 id="styling-system">Styling System<a class="headerlink" href="#styling-system" title="Permanent link">&para;</a></h2>
<p>The CSS uses a shared base with page-specific extensions:</p>
<h3 id="shared-pagecss">shared-page.css<a class="headerlink" href="#shared-pagecss" title="Permanent link">&para;</a></h3>
<p>Common styles with <code>emd-</code> prefix:</p>
<ul>
<li><code>.emd-container</code> - Page wrapper</li>
<li><code>.emd-header</code> - Header section</li>
<li><code>.emd-section</code> - Collapsible sections</li>
<li><code>.emd-domain-card</code> - Info cards</li>
<li><code>.emd-tech-grid</code> - Technical details grid</li>
</ul>
<h3 id="page-specific-css">Page-specific CSS<a class="headerlink" href="#page-specific-css" title="Permanent link">&para;</a></h3>
<p>Each page type imports shared and adds specifics:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c">/* component-page.css */</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p">@</span><span class="k">import</span><span class="w"> </span><span class="nt">url</span><span class="o">(</span><span class="s1">&#39;shared-page.css&#39;</span><span class="o">)</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="p">.</span><span class="nc">emd-subgrids-section</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c">/* component-only */</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h2 id="templates">Templates<a class="headerlink" href="#templates" title="Permanent link">&para;</a></h2>
<p>Templates use Jinja2 with these conventions:</p>
<ul>
<li><code>{{ variable | e }}</code> - HTML escaped output</li>
<li><code>{{ variable | safe }}</code> - Raw HTML (for icons, highlighted text)</li>
<li><code>{% if condition %}</code> - Conditional blocks</li>
<li><code>{{ icons.name | safe }}</code> - SVG icon injection</li>
</ul>
<h3 id="available-icons">Available Icons<a class="headerlink" href="#available-icons" title="Permanent link">&para;</a></h3>
<p>Defined in <code>helpers/__init__.py</code>:</p>
<ul>
<li><code>description</code> - Document icon</li>
<li><code>domain</code> - Globe icon</li>
<li><code>grid</code> - Grid icon</li>
<li><code>coupling</code> - Link icon</li>
<li><code>tech</code> - Code icon</li>
<li><code>reference</code> - Book icon</li>
<li><code>chevron</code> - Collapse/expand arrow</li>
</ul>
<h2 id="running-locally">Running Locally<a class="headerlink" href="#running-locally" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nb">cd</span><span class="w"> </span>src/mkdocs
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>mkdocs<span class="w"> </span>serve
</code></pre></div>
<p>The pre_build hook runs on each reload, regenerating pages from the registry.</p>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="pages-not-appearing-in-navigation">Pages not appearing in navigation<a class="headerlink" href="#pages-not-appearing-in-navigation" title="Permanent link">&para;</a></h3>
<ul>
<li>Check that files are in <code>docs/</code> before <code>generate_nav.py</code> runs</li>
<li>Verify the pre_build hook completed successfully</li>
<li>Check for errors in script output</li>
</ul>
<h3 id="styles-not-loading">Styles not loading<a class="headerlink" href="#styles-not-loading" title="Permanent link">&para;</a></h3>
<ul>
<li>Ensure CSS imports use correct relative paths</li>
<li>Check that <code>shared-page.css</code> exists</li>
<li>Verify <code>body.emd-page</code> class is set</li>
</ul>
<h3 id="generator-script-errors">Generator script errors<a class="headerlink" href="#generator-script-errors" title="Permanent link">&para;</a></h3>
<ul>
<li>Scripts have 120 second timeout</li>
<li>Check <code>cmipld</code> is installed</li>
<li>Verify network access to emd.mipcvs.dev</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <!-- Footer - Clean minimal design -->
<footer class="md-footer">
  
    
      
      <nav
        class="md-footer__inner md-grid"
        aria-label="Footer"
        
      >
        <!-- Link to previous page -->
        
          
          <a
            href="generators/"
            class="md-footer__link md-footer__link--prev"
            aria-label="Previous: Generators"
          >
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Generators
              </div>
            </div>
          </a>
        

        <!-- Link to next page -->
        
          
          <a
            href="styling/"
            class="md-footer__link md-footer__link--next"
            aria-label="Next: Styling"
          >
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Styling
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  
  <!-- Attribution footer -->
  <div class="md-footer-meta">
    <div class="md-footer__attribution">
      <div class="md-footer__attribution-inner md-grid">
        <p>
          © Copyright Daniel Ellis 2025, designed for the CMIP IPO.
        </p>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.path", "navigation.indexes", "navigation.footer", "toc.follow", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
  
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  <script>
    // Logo switching based on color scheme
    function updateLogo() {
      const scheme = document.body.getAttribute('data-md-color-scheme');
      const logos = document.querySelectorAll('.md-logo img');
      logos.forEach(function(logoImg) {
        if (logoImg) {
          if (scheme === 'slate') {
            logoImg.src = logoImg.src.replace('logo-light.svg', 'logo-dark.svg');
          } else {
            logoImg.src = logoImg.src.replace('logo-dark.svg', 'logo-light.svg');
          }
        }
      });
    }
    
    // Add repo link and dark mode toggle to header source area
    function setupHeaderControls() {
      const headerSource = document.querySelector('.md-header__source');
      if (!headerSource) return;
      
      // Check if controls already exist
      if (headerSource.querySelector('.header-repo')) return;
      
      // Get repo URL and name
      const repoUrl = 'https://github.com/WCRP-CMIP/Essential-Model-Documentation';
      const repoName = 'WCRP-CMIP/Essential-Model-Documentation';
      
      // Find the palette toggle input
      const paletteInputs = document.querySelectorAll('input[name="__palette"]');
      let toggleInput = null;
      paletteInputs.forEach(function(input) {
        if (!input.checked) {
          toggleInput = input;
        }
      });
      
      // Create container
      const container = document.createElement('div');
      container.style.display = 'flex';
      container.style.alignItems = 'center';
      container.style.gap = '1rem';
      
      // Create repo link with icon
      if (repoUrl) {
        const link = document.createElement('a');
        link.href = repoUrl;
        link.className = 'header-repo';
        link.target = '_blank';
        link.rel = 'noopener';
        link.style.display = 'flex';
        link.style.alignItems = 'center';
        link.style.gap = '0.4rem';
        
        // GitHub icon SVG - 2/3 of 48px = 32px
        const icon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        icon.setAttribute('viewBox', '0 0 16 16');
        icon.setAttribute('height', '32');
        icon.style.fill = 'currentColor';
        icon.innerHTML = '<path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>';
        
        const text = document.createElement('span');
        text.textContent = repoName;
        text.style.fontSize = '0.55rem';
        
        link.appendChild(icon);
        link.appendChild(text);
        container.appendChild(link);
      }
      
      // Create dark mode toggle
      if (toggleInput) {
        const toggleLabel = document.createElement('label');
        toggleLabel.htmlFor = toggleInput.id;
        toggleLabel.className = 'header-toggle';
        toggleLabel.style.cursor = 'pointer';
        toggleLabel.style.display = 'flex';
        toggleLabel.style.alignItems = 'center';
        
        const scheme = document.body.getAttribute('data-md-color-scheme');
        const icon = scheme === 'slate' ? '☀️' : '🌙';
        toggleLabel.textContent = icon;
        toggleLabel.style.fontSize = '1.2rem';
        
        container.appendChild(toggleLabel);
      }
      
      headerSource.innerHTML = '';
      headerSource.appendChild(container);
    }
    
    // Update toggle icon when scheme changes
    function updateToggleIcon() {
      const toggle = document.querySelector('.header-toggle');
      if (toggle) {
        const scheme = document.body.getAttribute('data-md-color-scheme');
        toggle.textContent = scheme === 'slate' ? '☀️' : '🌙';
      }
    }
    
    // Run on load
    document.addEventListener('DOMContentLoaded', function() {
      updateLogo();
      setTimeout(setupHeaderControls, 50);
    });
    
    // For instant navigation
    if (typeof document$ !== 'undefined') {
      document$.subscribe(function() {
        updateLogo();
        setTimeout(setupHeaderControls, 50);
      });
    }
    
    // Watch for scheme changes
    new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.attributeName === 'data-md-color-scheme') {
          updateLogo();
          updateToggleIcon();
        }
      });
    }).observe(document.body, { attributes: true });
  </script>

  </body>
</html>