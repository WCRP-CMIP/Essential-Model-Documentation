name: "Stage 4: Model (source_id)"
description: Register complete model configuration (Stage 4 of 4)
title: "[EMD] Stage 4: Model (source_id): [do not edit]"
labels: ['emd-submission', 'model', 'Review']
body:
  - type: markdown
    attributes:
      value: |
        ## Registered Models
        
        > [!TIP]
        > **Using a pre-registered model?** Select from the list below to auto-populate fields.
        >
        > NOTE: You must right-click and select `Open in New Window` or press `Ctrl+R` to refresh after selecting in order for the pre-filled links to update.
        
        <details>
        <summary>Pre-registered Models (must be opened in a new window)</summary>
        
        - [CNRM-ESM2-1e (cnrm-cm)](https://github.com/WCRP-CMIP/Essential-Model-Documentation/issues/new?template=model.yml&title=Model%3A+cnrm-esm2-1e&issue_kind=%22New%22&release_year=2018&dynamic_components=%22Aerosol%22%2C%22Atmosphere%22%2C%22Atmospheric+Chemistry%22%2C%22land-surface%22%2C%22Ocean%22%2C%22Ocean+Biogeochemistry%22%2C%22Sea+Ice%22&prescribed_components=&description=CNRM-ESM2-1e+is+the+CNRM+Earth+System+model+version+2+designed+for+CMIP6+on+the+basis+of+the+physical+core+CNRM-CM6-1+%28Voldoire+et+al.+2019%29.+In+concentration+mode%2C+it+is+the+same+model+as+CNRM-ESM2-1+%28S%C3%A9f%C3%A9rian+et+al.+2019%29%2C+it+only+differs+from+CNRM-ESM2-1+in+emission-driven+mode+%28see+Bossert+et+al.+2026%29.+The+main+adaptations+consist+in+a+better+conservation+of+the+carbon+in+all+the+components+leading+to+a+more+consistent%2Frealistic+carbon+flux+evolution+in+historical+simulations.&embedded_components=%22%5B%27atmosphere%27%2C+%27aerosol%27%5D%22%2C%22%5B%27atmosphere%27%2C+%27atmospheric-chemistry%27%5D%22%2C%22%5B%27ocean%27%2C+%27sea-ice%27%5D%22%2C%22%5B%27ocean%27%2C+%27ocean-biogeochemistry%27%5D%22&name=CNRM-ESM2-1e&family=%22CNRM-CM%22&calendar=%22standard%22&omitted_components=%22Land+Ice%22)
        - [Unknown](https://github.com/WCRP-CMIP/Essential-Model-Documentation/issues/new?template=model.yml&title=Model%3A+Unknown&issue_kind=%22New%22)
        
        </details>
        
        ## Stage 4: Model (source_id)
        
        This form has three sections:
        1. **Model Definition** — Registers the model identity and component coverage
        2. **Component Configuration** — Links to specific component configs from Stage 3
        3. **Coupling Configuration** — Defines how components interact
        
        [![Workflow](https://mermaid.ink/svg/pako:eNq9Vgtv2jAQ_iuWUacNJTySAG2kbep4tRJoVWGbtjEhkxhi1bGjxGlLH_995wRYWlrWVt0sJbF9r893vtxdY0_6FLt4zuWFF5BYocHpRKBs7O2ho-P-0QCeMTpEo_Fhv-uidkDEgiIVUJSoJaeIqGwxk0rJECmJArYIODyqoOhzpJgUiYtGiixo3ci_loGGvdXcXn0dLbWWTNLZIiZRsBL7OcHlcjZF9XJ5gn-t-fQYaXI_Zj5qU84T9AaNtDTzC3xU-I-rtwrqrS31Pouppw-Bxp_umLUIyB3JmF1JoQhH_bsmc54Z8HylsWLeNsdjoIa9DNAQIsRRj4SML5-MqjsagnAXAgqHWyaKhisN9-Tb2kZbhpEUVKhtnp0OswsOs7fjock5-I2Bp2p2Cpqdbc3OWvPj-kZ1ZJofbhalUslACbxvdKQ2VItkZC8n2H_2Z9n--f19O2eXYs4W6LgDNGdNA1cjswLUeeY8k_lFaru3TbSLQD3OvDMNd4IDpaLErVYXTAXprOLJsPqtfXpitofHJ9VukoADGeFmdnKzI700hB2io19lSZLSpCroxUeIdcSJou_13Z96kAtTIvxpkidDZRmC19B0xok4u4cBnPLqIIJNYkxBVZTmrLD6K5jZ64M5X2XgM6HYr48k1HwZjCwvdll3_pH1HTb1lf5HR87zYIdtSJj_a7pQpTrd3uGXwRhK3fdBd7T5NWVlLq9AsIjlGXVLtm0b-dy8YL4KXCu6NOaMc1dARB8QtV4kOuy93KL9clHnGaIPtgsm6vpMNwYsQZwJqvsCL-8cNu0Begtx1YFDMlVoLmMkCs3Du52warVm0_PuIrOLyLCBQxqHhPnQ3VxnODG0KSGdYBemPp2TlEM9mohbYCWpkqOl8LCr4pQaOJbpIsDunPAEVmnkwy3qMAIVKtzs6r_Ghh-qD43bMhUKu_aBgSMifkgZrumwxO41vsSu1azYVqtRa7WsltW06i3bwEvYru1XWs4BjJrdcJqNg8atga8yDbXKfqthYAr-lPEwb9eyru32NypLHJY)](https://github.com/WCRP-CMIP/Essential-Model-Documentation/tree/main?tab=readme-ov-file#submitting-emd)
        
        > [!NOTE]
        > Please ensure you are familiar with the completion guidance in the collapsible dropdown where it exists. Failure to do so will result in a failed submission.
        
        ---
        
        ### Model Definition
        
        This section defines the model identity that becomes the CMIP source_id.

  - type: input
    id: name
    attributes:
      label: Model Name
      description: |
        The full model name that becomes the CMIP source_id.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Model name (source_id)**
        
        Full identifier including family and version.
        
        For CMIP, this becomes the official **source_id**.
        
        **Examples:** CNRM-ESM2-1, HadGEM3-GC31-LL, CESM2, ACCESS-ESM1-5
        
        </details>
      placeholder: "CNRM-ESM2-1"
    validations:
      required: true

  - type: dropdown
    id: family
    attributes:
      label: Model Family
      description: |
        The Earth System family that this model belongs to.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Model family**
        
        Earth System family this model belongs to.
        
        **Leave as 'Not applicable' if:**
        - Standalone model
        - Family not yet registered
        
        </details>
      options:
        - "ACCESS"
        - "BCC-CSM"
        - "CanESM"
        - "CESM"
        - "CNRM-CM"
        - "EC-Earth"
        - "FGOALS"
        - "GFDL-CM4"
        - "GISS-E2"
        - "HadCM2"
        - "HadGEM3"
        - "ICON"
        - "IPSL-CM"
        - "MIROC"
        - "MPI-ESM"
        - "UKESM1"
      default: 0

  - type: textarea
    id: description
    attributes:
      label: Description
      description: |
        A scientific overview of the model mentioning all component types and their treatment.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Scientific overview**
        
        Must mention ALL component types.
        
        **What to include:**
        1. Dynamic components (briefly describe each)
        2. Prescribed components (explain treatment)
        3. Omitted components (note absence)
        
        **Example:** 'CNRM-ESM2-1 includes atmosphere (ARPEGE-Climat), ocean (NEMO), land surface (SURFEX), with embedded aerosols, atmospheric chemistry, sea ice, and ocean biogeochemistry. Land ice is omitted.'
        
        </details>
      placeholder: "1. Dynamic components (briefly)
2. Prescribed components and their treatment
3. Omitted components"
    validations:
      required: true

  - type: dropdown
    id: dynamic_components
    attributes:
      multiple: true
      label: Dynamic Components
      description: |
        The components that are actively simulated in this model. **Select multiple.**
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Active components**
        
        Scientific domains that are dynamically simulated (prognostic).
        
        At least one required.
        
        </details>
      options:
        - "Aerosol"
        - "Atmosphere"
        - "Atmospheric Chemistry"
        - "Land Ice"
        - "Land Surface and Subsurface"
        - "Ocean"
        - "Ocean Biogeochemistry"
        - "Sea Ice"
    validations:
      required: true

  - type: dropdown
    id: prescribed_components
    attributes:
      multiple: true
      label: Prescribed Components
      description: |
        The components with prescribed boundary conditions in this model. **Select multiple.**
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Prescribed components**
        
        Domains where values are provided as boundary conditions.
        
        **Example:** Sea ice extent prescribed from observations.
        
        </details>
      options:
        - "Aerosol"
        - "Atmosphere"
        - "Atmospheric Chemistry"
        - "Land Ice"
        - "Land Surface and Subsurface"
        - "Ocean"
        - "Ocean Biogeochemistry"
        - "Sea Ice"

  - type: dropdown
    id: omitted_components
    attributes:
      multiple: true
      label: Omitted Components
      description: |
        The components that are not represented in this model. **Select multiple.**
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Omitted components**
        
        Domains not represented at all.
        
        **Example:** Land-ice often omitted from atmosphere-ocean climate models.
        
        </details>
      options:
        - "Aerosol"
        - "Atmosphere"
        - "Atmospheric Chemistry"
        - "Land Ice"
        - "Land Surface and Subsurface"
        - "Ocean"
        - "Ocean Biogeochemistry"
        - "Sea Ice"

  - type: dropdown
    id: calendar
    attributes:
      multiple: true
      label: Calendar(s)
      description: |
        The permitted calendar types for this model. **Select multiple.**
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Calendar types**
        
        Permitted calendar systems for this model.
        
        - **standard**: Gregorian with leap years
        - **proleptic-gregorian**: Gregorian extended to past
        - **365-day**: No leap years (noleap)
        - **360-day**: 12 months × 30 days
        
        </details>
      options:
        - "360_day"
        - "365_day"
        - "366_day"
        - "julian"
        - "no-value"
        - "standard"
        - "tai"
        - "utc"
    validations:
      required: true

  - type: input
    id: release_year
    attributes:
      label: Release Year
      description: |
        The year when this model was released.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Release year**
        
        Year model was first released or used for published simulations.
        
        </details>
      placeholder: "2019"
    validations:
      required: true

  - type: textarea
    id: reference_dois
    attributes:
      label: Reference DOIs
      description: |
        The DOI URLs for model description papers.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Model publications**
        
        DOIs for papers describing the complete model.
        
        **Format:** `https://doi.org/...` (one per line)
        
        **Do NOT include:** Component-specific papers (those belong in Stage 3).
        
        </details>
      placeholder: "https://doi.org/10.1029/2019MS001791"
    validations:
      required: true

  - type: markdown
    attributes:
      value: |
        ---
        
        ### Component Configuration
        
        This section links the model to specific component configurations from Stage 3.
        
        **Prerequisites:** Component config IDs from Stage 3 (format: `<domain>_<component>_<c###>_<v###>`).

  - type: dropdown
    id: component_configs
    attributes:
      multiple: true
      label: Component Config IDs
      description: |
        The component configuration IDs from Stage 3 that make up this model. **Select multiple.**
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Component configuration IDs**
        
        Select the specific component configurations from Stage 3 that make up this model.
        
        Must have one config per dynamic component domain.
        
        </details>
      options:
        - "aerosol_tactic_h100_v100"
        - "atmosphere_arpege-climat-version-6-3_h100_v100"
        - "atmospheric-chemistry_reprobus-c-v2-0_h100_v100"
        - "land-surface_surfex-v8-modeling-platform_h100_v102"
        - "ocean-biogeochemistry_piscesv2-gas_h101_v103"
        - "ocean_nemo-v3-6_h101_v103"
        - "sea-ice_gelato_h101_v104"
    validations:
      required: true

  - type: markdown
    attributes:
      value: |
        ---
        
        ### Coupling Configuration
        
        This section defines how components interact within the model.
        
        **Important:** Each coupling group must contain **exactly TWO components** that exchange data directly.
        
        A coupling group represents a pair of mutually coupled components (bidirectional exchange). If a model has three or more superior host components that all couple with each other, create separate coupling groups for each pair.
        
        <details>
        <summary>Coupling Groups Example</summary>
        
        For a model with atmosphere, ocean, and land surface that all couple together:
        - **Coupling Group 1:** Atmosphere + Ocean
        - **Coupling Group 2:** Atmosphere + Land Surface  
        - **Coupling Group 3:** Ocean + Land Surface
        
        Each group represents one coupling relationship between two components.
        
        </details>

  - type: dropdown
    id: embedded_components
    attributes:
      multiple: true
      label: Embedded Components
      description: |
        Pairs of embedded and host components where one runs within another (embedded -> host). **Select multiple.**
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Embedded relationships**
        
        Components tightly integrated within a host (share integration loop, often share grid).
        
        **Format:** `embedded -> host`
        
        **Example:**
        - Aerosol -> Atmosphere
        - Atmospheric Chemistry -> Atmosphere
        - Sea Ice -> Ocean
        
        </details>
      options:
        - "Aerosol -> Atmosphere"
        - "Aerosol -> Atmospheric Chemistry"
        - "Aerosol -> Land Ice"
        - "Aerosol -> Land Surface and Subsurface"
        - "Aerosol -> Ocean"
        - "Aerosol -> Ocean Biogeochemistry"
        - "Aerosol -> Sea Ice"
        - "Atmosphere -> Aerosol"
        - "Atmosphere -> Atmospheric Chemistry"
        - "Atmosphere -> Land Ice"
        - "Atmosphere -> Land Surface and Subsurface"
        - "Atmosphere -> Ocean"
        - "Atmosphere -> Ocean Biogeochemistry"
        - "Atmosphere -> Sea Ice"
        - "Atmospheric Chemistry -> Aerosol"
        - "Atmospheric Chemistry -> Atmosphere"
        - "Atmospheric Chemistry -> Land Ice"
        - "Atmospheric Chemistry -> Land Surface and Subsurface"
        - "Atmospheric Chemistry -> Ocean"
        - "Atmospheric Chemistry -> Ocean Biogeochemistry"
        - "Atmospheric Chemistry -> Sea Ice"
        - "Land Ice -> Aerosol"
        - "Land Ice -> Atmosphere"
        - "Land Ice -> Atmospheric Chemistry"
        - "Land Ice -> Land Surface and Subsurface"
        - "Land Ice -> Ocean"
        - "Land Ice -> Ocean Biogeochemistry"
        - "Land Ice -> Sea Ice"
        - "Land Surface and Subsurface -> Aerosol"
        - "Land Surface and Subsurface -> Atmosphere"
        - "Land Surface and Subsurface -> Atmospheric Chemistry"
        - "Land Surface and Subsurface -> Land Ice"
        - "Land Surface and Subsurface -> Ocean"
        - "Land Surface and Subsurface -> Ocean Biogeochemistry"
        - "Land Surface and Subsurface -> Sea Ice"
        - "Ocean -> Aerosol"
        - "Ocean -> Atmosphere"
        - "Ocean -> Atmospheric Chemistry"
        - "Ocean -> Land Ice"
        - "Ocean -> Land Surface and Subsurface"
        - "Ocean -> Ocean Biogeochemistry"
        - "Ocean -> Sea Ice"
        - "Ocean Biogeochemistry -> Aerosol"
        - "Ocean Biogeochemistry -> Atmosphere"
        - "Ocean Biogeochemistry -> Atmospheric Chemistry"
        - "Ocean Biogeochemistry -> Land Ice"
        - "Ocean Biogeochemistry -> Land Surface and Subsurface"
        - "Ocean Biogeochemistry -> Ocean"
        - "Ocean Biogeochemistry -> Sea Ice"
        - "Sea Ice -> Aerosol"
        - "Sea Ice -> Atmosphere"
        - "Sea Ice -> Atmospheric Chemistry"
        - "Sea Ice -> Land Ice"
        - "Sea Ice -> Land Surface and Subsurface"
        - "Sea Ice -> Ocean"
        - "Sea Ice -> Ocean Biogeochemistry"

  - type: dropdown
    id: coupling_group_1
    attributes:
      multiple: true
      label: Coupling Group 1
      description: |
        First group of mutually coupled components. **Select TWO only.**
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Coupling groups**
        
        Groups of mutually coupled superior hosts (non-embedded components).
        
        Components in a group all exchange information directly.
        
        **Example:** Atmosphere, Land Surface, Ocean
        
        </details>
      options:
        - "Aerosol"
        - "Atmosphere"
        - "Atmospheric Chemistry"
        - "Land Ice"
        - "Land Surface and Subsurface"
        - "Ocean"
        - "Ocean Biogeochemistry"
        - "Sea Ice"

  - type: dropdown
    id: coupling_group_2
    attributes:
      multiple: true
      label: Coupling Group 2
      description: Second group of mutually coupled components (if needed). **Select TWO only.**
      options:
        - "Aerosol"
        - "Atmosphere"
        - "Atmospheric Chemistry"
        - "Land Ice"
        - "Land Surface and Subsurface"
        - "Ocean"
        - "Ocean Biogeochemistry"
        - "Sea Ice"

  - type: dropdown
    id: coupling_group_3
    attributes:
      multiple: true
      label: Coupling Group 3
      description: Third group of mutually coupled components (if needed). **Select TWO only.**
      options:
        - "Aerosol"
        - "Atmosphere"
        - "Atmospheric Chemistry"
        - "Land Ice"
        - "Land Surface and Subsurface"
        - "Ocean"
        - "Ocean Biogeochemistry"
        - "Sea Ice"

  - type: dropdown
    id: coupling_group_4
    attributes:
      multiple: true
      label: Coupling Group 4
      description: Fourth group of mutually coupled components (if needed). **Select TWO only.**
      options:
        - "Aerosol"
        - "Atmosphere"
        - "Atmospheric Chemistry"
        - "Land Ice"
        - "Land Surface and Subsurface"
        - "Ocean"
        - "Ocean Biogeochemistry"
        - "Sea Ice"

  - type: dropdown
    id: coupling_group_5
    attributes:
      multiple: true
      label: Coupling Group 5
      description: Fifth group of mutually coupled components (if needed). **Select TWO only.**
      options:
        - "Aerosol"
        - "Atmosphere"
        - "Atmospheric Chemistry"
        - "Land Ice"
        - "Land Surface and Subsurface"
        - "Ocean"
        - "Ocean Biogeochemistry"
        - "Sea Ice"

  - type: markdown
    attributes:
      value: |
        ---
        
        ## Issue Handling
        
        **After submission:**
        - Creates `model` entry with CMIP source_id
        - Registration complete — model can be used in CMIP activities
        - [Track progress in issue comments](https://github.com/WCRP-CMIP/Essential-Model-Documentation/issues?q=is%3Aissue%20author%3A%40me)

  - type: dropdown
    id: issue_kind
    attributes:
      label: Issue Kind
      description: Whether this is a new submission or a modification to an existing entry.
      options:
        - "Modify"
        - "New"
      default: 0
    validations:
      required: true

  - type: input
    id: collaborators
    attributes:
      label: Additional Collaborators
      description: |
        To add attribution to additional members include their GitHub usernames (only) separated by a comma.
      placeholder: "user1,user2,user3,..."
