name: "Stage 4: Model (source_id)"
description: Register complete model configuration (Stage 4 of 4)
title: "[EMD] Model:"
labels: ['emd-submission', 'model', 'Review']
body:
  - type: markdown
    attributes:
      value: |
        ## Stage 4: Model (source_id)
        
        Registers a complete model configuration — the final step in the EMD workflow.
        
        **Prerequisites:** Component config IDs from Stage 3; Model family ID (if applicable).
        
        > [!NOTE]
        > Please ensure you are familiar with the completion guidance in the collapsible dropdown where it exists. Failure to do so will result in a failed submission.
        > To modify an existing entry, check the __[model files](https://github.com/WCRP-CMIP/Essential-Model-Documentation/tree/main/model)__.

  - type: input
    id: name
    attributes:
      label: Model Name
      description: |
        The full model name that becomes the CMIP source_id.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Model name (source_id)**
        
        Full identifier including family and version.
        
        For CMIP, this becomes the official **source_id**.
        
        **Examples:** CNRM-ESM2-1, HadGEM3-GC31-LL, CESM2, ACCESS-ESM1-5
        
        </details>
      placeholder: "CNRM-ESM2-1"
    validations:
      required: true

  - type: dropdown
    id: family
    attributes:
      label: Model Family
      description: |
        The Earth System family that this model belongs to.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Model family**
        
        Earth System family this model belongs to.
        
        **Leave as 'Not applicable' if:**
        - Standalone model
        - Family not yet registered
        
        </details>
      options:
        - "Not specified"
        - "access"
        - "bcc-csm"
        - "bisicles"
        - "cam"
        - "canesm"
        - "cesm"
        - "clm"
        - "cnrm-cm"
        - "ec-earth"
        - "fgoals"
        - "gfdl-cm4"
        - "giss-e2"
        - "hadcm2"
        - "hadgem3"
        - "icon"
        - "ipsl-cm"
        - "miroc"
        - "mpi-esm"
        - "ukesm1"
      default: 0

  - type: textarea
    id: description
    attributes:
      label: Description
      description: |
        A scientific overview of the model mentioning all component types and their treatment.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Scientific overview**
        
        Must mention ALL component types.
        
        **What to include:**
        1. Dynamic components (briefly describe each)
        2. Prescribed components (explain treatment)
        3. Omitted components (note absence)
        
        **Example:** 'CNRM-ESM2-1 includes atmosphere (ARPEGE-Climat), ocean (NEMO), land surface (SURFEX), with embedded aerosols, atmospheric chemistry, sea ice, and ocean biogeochemistry. Land ice is omitted.'
        
        </details>
      placeholder: "1. Dynamic components (briefly)
2. Prescribed components and their treatment
3. Omitted components"
    validations:
      required: true

  - type: dropdown
    id: dynamic_components
    attributes:
      multiple: true
      label: Dynamic Components
      description: |
        The components that are actively simulated in this model.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Active components**
        
        Components that are dynamically simulated (prognostic).
        
        At least one required. Each must have a component_config from Stage 3.
        
        </details>
      options:
        - "aerosol"
        - "atmosphere"
        - "atmospheric-chemistry"
        - "land-ice"
        - "land-surface"
        - "ocean"
        - "ocean-biogeochemistry"
        - "sea-ice"
    validations:
      required: true

  - type: dropdown
    id: prescribed_components
    attributes:
      multiple: true
      label: Prescribed Components
      description: |
        The components with prescribed boundary conditions in this model.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Prescribed components**
        
        Components where values are provided as boundary conditions.
        
        **Example:** Sea ice extent prescribed from observations.
        
        </details>
      options:
        - "aerosol"
        - "atmosphere"
        - "atmospheric-chemistry"
        - "land-ice"
        - "land-surface"
        - "ocean"
        - "ocean-biogeochemistry"
        - "sea-ice"

  - type: dropdown
    id: omitted_components
    attributes:
      multiple: true
      label: Omitted Components
      description: |
        The components that are not represented in this model.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Omitted components**
        
        Components not represented at all.
        
        **Example:** Land-ice often omitted from atmosphere-ocean climate models.
        
        </details>
      options:
        - "aerosol"
        - "atmosphere"
        - "atmospheric-chemistry"
        - "land-ice"
        - "land-surface"
        - "ocean"
        - "ocean-biogeochemistry"
        - "sea-ice"

  - type: textarea
    id: component_configs
    attributes:
      label: Component Config IDs
      description: |
        The component configuration IDs from Stage 3 that make up this model.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Component configuration IDs**
        
        IDs from Stage 3 for each dynamic component.
        
        **Format:** `{domain}_- aerosol
        - atmosphere
        - atmospheric-chemistry
        - land-ice
        - land-surface
        - ocean
        - ocean-biogeochemistry
        - sea-ice_{c###}_{v###}` (one per line)
        
        Must have one config per dynamic component.
        
        </details>
      placeholder: "atmosphere_arpege-climat-v6-3_c100_v100
ocean_nemo-v3-6_c101_v103
land-surface_surfex-v8_c100_v102"
    validations:
      required: true

  - type: textarea
    id: embedded_components
    attributes:
      label: Embedded Components
      description: |
        Pairs of embedded and host components where one runs within another.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Embedded relationships**
        
        Components tightly integrated within a host (share integration loop, often share grid).
        
        **Format:** `embedded,host` (one pair per line)
        
        **Example:**
        ```
        aerosol,atmosphere
        atmospheric-chemistry,atmosphere
        sea-ice,ocean
        ocean-biogeochemistry,ocean
        ```
        
        </details>
      placeholder: "aerosol,atmosphere
atmospheric-chemistry,atmosphere
sea-ice,ocean"

  - type: textarea
    id: coupling_groups
    attributes:
      label: Coupling Groups
      description: |
        Groups of components that are mutually coupled and exchange data.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Coupling relationships**
        
        Groups of mutually coupled superior hosts (non-embedded components).
        
        **Format:** `comp1,comp2,comp3` (one group per line)
        
        Components in a group all exchange information directly.
        
        **Example:** `atmosphere,land-surface,ocean`
        
        </details>
      placeholder: "atmosphere,land-surface,ocean"

  - type: dropdown
    id: calendar
    attributes:
      multiple: true
      label: Calendar(s)
      description: |
        The permitted calendar types for this model.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Calendar types**
        
        Permitted calendar systems for this model.
        
        - **standard**: Gregorian with leap years
        - **proleptic-gregorian**: Gregorian extended to past
        - **365-day**: No leap years (noleap)
        - **360-day**: 12 months × 30 days
        
        List most commonly used first.
        
        </details>
      options:
        - "standard"
        - "proleptic-gregorian"
        - "gregorian"
        - "365-day"
        - "360-day"
    validations:
      required: true

  - type: input
    id: release_year
    attributes:
      label: Release Year
      description: |
        The year when this model was released.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Release year**
        
        Year model was first released or used for published simulations.
        
        </details>
      placeholder: "2019"
    validations:
      required: true

  - type: textarea
    id: reference_dois
    attributes:
      label: Reference DOIs
      description: |
        The DOI URLs for model description papers.
        
        <details markdown="1">
        <summary>Detailed Guidance</summary>
        
        **Model publications**
        
        DOIs for papers describing the complete model.
        
        **Format:** `https://doi.org/...` (one per line)
        
        **Do NOT include:** Component-specific papers (those belong in Stage 3).
        
        </details>
      placeholder: "https://doi.org/10.1029/2019MS001791"
    validations:
      required: true

  - type: markdown
    attributes:
      value: |
        ---
        
        ## Issue Handling
        
        **After submission:**
        - Creates `model` entry with CMIP source_id
        - Registration complete — model can be used in CMIP activities
        - Track progress in issue comments
        
        [![Workflow](https://mermaid.ink/svg/pako:eNq9Vgtv2jAQ_iuWUacNJTySAG2kbep4tRJoVWGbtjEhkxhi1bGjxGlLH_995wRYWlrWVt0sJbF9r893vtxdY0_6FLt4zuWFF5BYocHpRKBs7O2ho-P-0QCeMTpEo_Fhv-uidkDEgiIVUJSoJaeIqGwxk0rJECmJArYIODyqoOhzpJgUiYtGiixo3ci_loGGvdXcXn0dLbWWTNLZIiZRsBL7OcHlcjZF9XJ5gn-t-fQYaXI_Zj5qU84T9AaNtDTzC3xU-I-rtwrqrS31Pouppw-Bxp_umLUIyB3JmF1JoQhH_bsmc54Z8HylsWLeNsdjoIa9DNAQIsRRj4SML5-MqjsagnAXAgqHWyaKhisN9-Tb2kZbhpEUVKhtnp0OswsOs7fjock5-I2Bp2p2Cpqdbc3OWvPj-kZ1ZJofbhalUslACbxvdKQ2VItkZC8n2H_2Z9n--f19O2eXYs4W6LgDNGdNA1cjswLUeeY8k_lFaru3TbSLQD3OvDMNd4IDpaLErVYXTAXprOLJsPqtfXpitofHJ9VukoADGeFmdnKzI700hB2io19lSZLSpCroxUeIdcSJou_13Z96kAtTIvxpkidDZRmC19B0xok4u4cBnPLqIIJNYkxBVZTmrLD6K5jZ64M5X2XgM6HYr48k1HwZjCwvdll3_pH1HTb1lf5HR87zYIdtSJj_a7pQpTrd3uGXwRhK3fdBd7T5NWVlLq9AsIjlGXVLtm0b-dy8YL4KXCu6NOaMc1dARB8QtV4kOuy93KL9clHnGaIPtgsm6vpMNwYsQZwJqvsCL-8cNu0Begtx1YFDMlVoLmMkCs3Du52warVm0_PuIrOLyLCBQxqHhPnQ3VxnODG0KSGdYBemPp2TlEM9mohbYCWpkqOl8LCr4pQaOJbpIsDunPAEVmnkwy3qMAIVKtzs6r_Ghh-qD43bMhUKu_aBgSMifkgZrumwxO41vsSu1azYVqtRa7WsltW06i3bwEvYru1XWs4BjJrdcJqNg8atga8yDbXKfqthYAr-lPEwb9eyru32NypLHJY)](https://github.com/WCRP-CMIP/Essential-Model-Documentation/blob/main/.github/GEN_ISSUE_TEMPLATE/README.md)

  - type: dropdown
    id: issue_kind
    attributes:
      label: Issue Kind
      description: Whether this is a new submission or a modification to an existing entry.
      options:
        - "New"
        - "Modify"
      default: 0
    validations:
      required: true
