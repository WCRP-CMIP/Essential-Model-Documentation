name: Top Level Model Submission
description: Submit metadata for the top-level model properties as specified in the EMD specification.
title: "[EMD] Top Level Model Submission"
labels: ["emd-submission", "top_level_model"]
body:
  - type: markdown
    attributes:
      value: |
        ## Instructions
        Please fill out the following fields for the **Top Level Model** as specified in the EMD specification.
        All fields correspond directly to the Model Properties section (Section 2) of the EMD specification.

  - type: input
    id: name
    attributes:
      label: Name
      description: The name of the model. For CMIP7, must be a registered source_id. May include family indication but not version.
      placeholder: "e.g., HadGEM3-GC31-HH, CESM2, ICON-ESM"
    validations:
      required: true

  - type: input
    id: family
    attributes:
      label: Family
      description: The name of the family of models that this model belongs to. Family models share code bases but may be configured differently.
      placeholder: "e.g., HadGEM3, CESM, ICON"
    validations:
      required: true

  - type: checkboxes
    id: components
    attributes:
      label: Components
      description: Select the processes that are dynamically simulated by the model components (from Model component process CV).
      options:
{%- for key in realms.keys() %}
        - label: {{ key }}
{%- endfor %}

  - type: textarea
    id: description
    attributes:
      label: Description
      description: A brief, free-text scientific overview of the model. Include mention of dynamically simulated processes but avoid duplicating component-level information.
      placeholder: "Brief scientific overview of the model, its purpose, and key capabilities. Mention the dynamically simulated processes selected above."
    validations:
      required: true

  - type: checkboxes
    id: calendar
    attributes:
      label: Calendar
      description: The calendars that define which dates are permitted in the model. Multiple calendars may be selected for different simulations.
      options:
{%- for calendar in calendars %}
        - label: {{ calendar.get('validation-key', calendar.get('id', '')) }}
{%- endfor %}

  - type: input
    id: release_year
    attributes:
      label: Release Year
      description: The year in which this model configuration was released, or first used for published simulations.
      placeholder: "e.g., 2016, 2019, 2023"
    validations:
      required: true

  - type: markdown
    attributes:
      value: "## References"

  - type: markdown
    attributes:
      value: |
        **Instructions for References:** Each reference must include both Citation and DOI properties.
        A DOI is required for all references - if one doesn't exist, you must create one (e.g., with Zenodo).

  - type: textarea
    id: reference_1_citation
    attributes:
      label: Reference 1 - Citation
      description: Human-readable citation for the primary model reference.
      placeholder: "Smith, R. S., et al. (2021). Model Name: Description of the model. Journal Name, Volume, Pages. https://doi.org/..."
    validations:
      required: true

  - type: input
    id: reference_1_doi
    attributes:
      label: Reference 1 - DOI
      description: The persistent identifier (DOI) for the primary model reference.
      placeholder: "https://doi.org/10.1029/2021MS002520"
    validations:
      required: true

  - type: textarea
    id: reference_2_citation
    attributes:
      label: Reference 2 - Citation (Optional)
      description: Human-readable citation for additional model reference.
      placeholder: "Additional reference citation (optional)"

  - type: input
    id: reference_2_doi
    attributes:
      label: Reference 2 - DOI (Optional)
      description: DOI for additional model reference.
      placeholder: "https://doi.org/..."

  - type: textarea
    id: reference_3_citation
    attributes:
      label: Reference 3 - Citation (Optional)
      description: Human-readable citation for additional model reference.
      placeholder: "Additional reference citation (optional)"

  - type: input
    id: reference_3_doi
    attributes:
      label: Reference 3 - DOI (Optional)
      description: DOI for additional model reference.
      placeholder: "https://doi.org/..."
