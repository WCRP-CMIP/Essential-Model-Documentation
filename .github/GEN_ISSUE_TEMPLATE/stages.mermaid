flowchart LR
    %% HIGHLIGHT A STAGE: Change the style at the bottom to highlight
    %% Options: Stage1, Stage2, MF, Stage3, Stage4

    subgraph Stage1["**Stage 1**"]
        S1["Grid Cells & Subgrid"]
    end

    subgraph Stage2["**Stage 2**"]
        direction TB
        S2a["Horizontal Grid"]
        S2b["Vertical Grid"]
    end

    subgraph MF["**Model Family**"]
        direction TB
        ESM["Earth System Family"]
        CF["Component Family"]
    end

    subgraph Stage3["**Stage 3**"]
        S3["Model Component"]
    end

    subgraph Stage4["**Stage 4**"]
        S4["Model"]
    end

    S1 -->|g###, s###| S2a
    S2a -->|c###| S3
    S2b -->|v###| S3
    S3 -->|config ID| S4
    ESM -.->|family-id| S4
    CF -.->|family-id| S3

    click S1 "https://github.com/WCRP-CMIP/Essential-Model-Documentation/issues/new?template=grid_cell_and_subgrid.yml" _blank
    click S2a "https://github.com/WCRP-CMIP/Essential-Model-Documentation/issues/new?template=horizontal_computational_grid.yml" _blank
    click S2b "https://github.com/WCRP-CMIP/Essential-Model-Documentation/issues/new?template=vertical_computational_grid.yml" _blank
    click S3 "https://github.com/WCRP-CMIP/Essential-Model-Documentation/issues/new?template=model_component.yml" _blank
    click S4 "https://github.com/WCRP-CMIP/Essential-Model-Documentation/issues/new?template=model.yml" _blank
    click ESM "https://github.com/WCRP-CMIP/Essential-Model-Documentation/issues/new?template=model_family.yml" _blank
    click CF "https://github.com/WCRP-CMIP/Essential-Model-Documentation/issues/new?template=model_family.yml" _blank

    %% DEFAULT STYLES
    style Stage1 stroke:#333,stroke-width:2px,fill:none
    style Stage2 stroke:#333,stroke-width:2px,fill:none
    style MF stroke:#333,stroke-width:2px,fill:none
    style Stage3 stroke:#333,stroke-width:2px,fill:none
    style Stage4 stroke:#333,stroke-width:2px,fill:none

    %% HIGHLIGHT - Edit this line to change highlight (comment out for no highlight)
    %%    style Stage3 stroke:#0066cc,stroke-width:3px,fill:none
